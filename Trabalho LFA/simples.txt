load 'question.qst' as f1;

//Teste linear

Quiz Teste(partcipant, score) {
    
    //60% para parte1
    //4 perguntas sobre historia de portugal
    //25% cada pergunta
    Section parte1 (
        from f1:
        P1,
        P2:[0,1,2],
        P4,
        P5;
    );

    //40% para parte2
    //2 perguntas sobre gramatica
    //50% cada pergunta
    Section parte2 (
        from f1: P7,P8:[0,3];
    );
}

main {
    String participant;
    participant = "Joao";
    
    int score;
    score = 100;
    Quiz t;
    t = Teste(participant, score);
    
    //comecar na primeira parte pergunta P1
    goto t.parte1;
    goto t.parte1.f1P1;

    double p1Size;
    p1Size = sizeof t.parte1;
    int i;
    i = 0;
    
    double resultP1;
    resultP1 = 0;

    while(i < p1Size && i < p1Size) { 
        //responder pergunta atual
        show t.current.current;
        answer(t.current.current);
        
        //calcular resultado
        double resultQuestion;
        resultQuestion = result t.current.current;
        resultP1 = resultP1 + 0.25 * resultQuestion;

        //avancar para a proxima pergunta
        next t.current;
        i++;
    }
    
    //avancar para proxima Section (parte2), comecar na pergunta P7
    next t;
    goto t.parte2.f1P7;
    
    i = 0;
    int p2Size;
    p2Size = sizeof t.parte2;

    double resultP2;
    resultP2 = 0;

    while(i < p2Size) {
        show t.current.current;
        answer(t.current.current);
        
        //calcular resultado
        resultQuestion = result t.current.current;
        resultP2 = resultP2 + 0.5 * resultQuestion;

        //avancar para a proxima pergunta
        next t.current;
        i++;
    }

    double finalResult;
    finalResult = resultP1 * 0.6 + resultP2 * 0.4; 

    if(finalResult < 50) {
        print "Reprovado ! \n";
    }
    else {
        print "Aprovado ! \n";
    }

    print "Resultado final : " + finalResult;
}
